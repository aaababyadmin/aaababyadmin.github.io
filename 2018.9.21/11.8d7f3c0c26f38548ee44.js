webpackJsonp([11],{1675:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t){return{mainapp:t.mainapp,salereport:t.salereport}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(334),c=n(r),u=o(331),s=n(u),i=o(26),l=n(i),d=o(1),p=n(d),m=o(6),f=n(m),h=o(2),g=n(h),v=o(3),y=n(v);o(717);var S=o(0),k=n(S),E=o(7),_=(n(E),o(34)),O=o(21),w=o(20),A=n(w),I=o(177),C=o(330),M=o(1681),x=o(90),b=function(t){function e(){var t,o,n,a;(0,p.default)(this,e);for(var r=arguments.length,u=Array(r),i=0;i<r;i++)u[i]=arguments[i];return o=n=(0,g.default)(this,(t=e.__proto__||(0,l.default)(e)).call.apply(t,[this].concat(u))),n.checkadmin=function(){var t=n.props,e=t.mainapp,o=t.dispatch,a=e.eosAccount;a==x.contractname||x.adminname.includes(a)||o(O.routerRedux.push({pathname:"/mywallettools/error403"}))},n.SetloadStatus=function(t){(0,n.props.dispatch)({type:"salereport/updatedata",payload:{updateloading:t}})},n.loadsalereport=function(){(0,n.props.dispatch)({type:"salereport/query",payload:{}})},n.InitByadmin=function(){var t=n.props,e=t.mainapp,o=(t.dispatch,e.scatter),a=e.activeNetwork,r=e.eosAccount,c=e.eosAuthority,u=(0,M.getScatterEosClient)(o,a),i={authorization:[r+"@"+c]};return e&&e.eosAccount?""==r?void(0,C.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55"):r!=x.contractname?void(0,C.msgError)(r+" \u4f60\u7684eos\u8d26\u53f7\u6ca1\u6709\u6743\u9650\u64cd\u4f5c"):(n.SetloadStatus(!0),void u.contract(x.contractname).then(function(t){t.setttsale({mysteps:x.nowsale.steps},i).then(function(t){(0,C.msgSuccess)(t.transaction_id),n.SetloadStatus(!1),n.loadsalereport()},function(t){n.SetloadStatus(!1),(0,C.msgError)((0,s.default)(t))})})):void(0,C.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55")},n.OnInitfun=function(){c.default.confirm({title:A.default.get("comm.yesno"),content:A.default.get("comm.appoveyesno"),okText:A.default.get("comm.ok"),cancelText:A.default.get("comm.cancel"),onOk:function(){return n.InitByadmin()}})},n.StatusByadmin=function(t,e){var o=n.props,a=o.mainapp,r=(o.dispatch,a.scatter),c=a.activeNetwork,u=a.eosAccount,i=a.eosAuthority,l=(0,M.getScatterEosClient)(r,c),d={authorization:[u+"@"+i]};return a&&a.eosAccount?""==u?void(0,C.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55"):u!=x.contractname?void(0,C.msgError)(u+" \u4f60\u7684eos\u8d26\u53f7\u6ca1\u6709\u6743\u9650\u64cd\u4f5c"):(n.SetloadStatus(!0),void l.contract(x.contractname).then(function(o){o.setnowsale({from:u,mysteps:e.mysteps,status:t},d).then(function(t){(0,C.msgSuccess)(t.transaction_id),n.SetloadStatus(!1),n.loadsalereport()},function(t){n.SetloadStatus(!1),(0,C.msgError)((0,s.default)(t))})})):void(0,C.msgError)("\u4f60\u7684eos\u8d26\u53f7\u8fd8\u6ca1\u6709\u767b\u5f55")},n.OnOpenClose=function(t,e){c.default.confirm({title:A.default.get("comm.yesno"),content:A.default.get("comm.yesno"),okText:A.default.get("comm.ok"),cancelText:A.default.get("comm.cancel"),onOk:function(){return n.StatusByadmin(t,e)}})},a=o,(0,g.default)(n,a)}return(0,y.default)(e,t),(0,f.default)(e,[{key:"componentWillMount",value:function(){this.checkadmin()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this.props,e=t.mainapp,o=t.salereport,n=(t.dispatch,e.eosAccount);return k.default.createElement(I.MyappPageHeaderLayout,{title:A.default.get("comm.managesalereport")},k.default.createElement("div",null,k.default.createElement(I.SaleReport,{salereport:o,OnOpenClose:n==x.contractname?this.OnOpenClose:null,OnSaleInit:n==x.contractname?this.OnInitfun:null})))}}]),e}(S.PureComponent);e.default=(0,_.connect)(a)(b),t.exports=e.default},1681:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getScatterEosClient=void 0;var n=o(333),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.getScatterEosClient=function(t,e){var o={protocol:e.endpoint.protocol,blockchain:e.network.network,host:e.endpoint.url,port:e.endpoint.port,chainId:e.network.chainId},n={broadcast:!0,sign:!0,chainId:e.network.chainId},r=e.endpoint.protocol;return t.eos(o,a.default,n,r)}}});